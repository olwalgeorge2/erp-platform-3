quarkus.log.console.format=%d{yyyy-MM-dd HH:mm:ss,SSS} %-5p [%t] [%X{traceId}] [%X{tenantId}] %c{2} - %s%e%n
quarkus.log.console.json.enabled=false

quarkus.micrometer.enabled=true
quarkus.micrometer.export.prometheus.enabled=true
quarkus.micrometer.export.prometheus.path=/metrics

# Kafka Configuration (Redpanda with Kafka API compatibility)
# Allow overriding via environment to align host vs in-cluster listeners
kafka.bootstrap.servers=${KAFKA_BOOTSTRAP_SERVERS:localhost:19092}

# Outgoing channel for domain events
mp.messaging.outgoing.identity-events-out.connector=smallrye-kafka
mp.messaging.outgoing.identity-events-out.topic=identity.domain.events.v1
mp.messaging.outgoing.identity-events-out.key.serializer=org.apache.kafka.common.serialization.StringSerializer
mp.messaging.outgoing.identity-events-out.value.serializer=org.apache.kafka.common.serialization.StringSerializer

# Kafka producer settings
mp.messaging.outgoing.identity-events-out.acks=all
mp.messaging.outgoing.identity-events-out.retries=3
mp.messaging.outgoing.identity-events-out.max-in-flight-requests-per-connection=5
mp.messaging.outgoing.identity-events-out.enable-idempotence=true
mp.messaging.outgoing.identity-events-out.compression-type=snappy

# Kafka client ID for observability
mp.messaging.outgoing.identity-events-out.client-id=identity-service-${quarkus.uuid}

# HTTP Port Configuration
quarkus.http.port=8081

# Database Configuration
quarkus.datasource.db-kind=postgresql
quarkus.datasource.username=erp_user
quarkus.datasource.password=erp_pass
quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5432/erp_identity

# Flyway migration
quarkus.flyway.migrate-at-start=true
quarkus.flyway.baseline-on-migrate=true

# Hibernate ORM
quarkus.hibernate-orm.database.generation=none
